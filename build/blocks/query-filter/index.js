(()=>{var e,r={609(e,r,t){"use strict";const i=window.wp.blocks,l=window.wp.i18n,a=window.wp.blockEditor;var o=t(942),n=t.n(o);const s=window.wp.components,u=window.wp.data,p=window.ReactJSXRuntime;function c({type:e="checkbox",name:r,value:t,checked:i,disabled:l,className:a,onChange:o,children:s,...u}){const c=n()(`wp-block-pikari-gutenberg-query-filter__${e}-item`,a);return(0,p.jsxs)("label",{className:c,children:[(0,p.jsx)("input",{type:e,name:r,value:t,checked:i,disabled:l,onChange:o,...u}),s]})}const y=JSON.parse('{"UU":"pikari-gutenberg-query-filter/query-filter"}'),g=[{name:"post-type",title:(0,l.__)("Post Type Filter","pikari-gutenberg-query-filter"),description:(0,l.__)("Filter posts by post type","pikari-gutenberg-query-filter"),attributes:{filterType:"post-type",label:(0,l.__)("Content Type","pikari-gutenberg-query-filter")},isDefault:!0,scope:["inserter","transform"],isActive:e=>"post-type"===e.filterType,icon:"filter"},{name:"taxonomy",title:(0,l.__)("Taxonomy Filter","pikari-gutenberg-query-filter"),description:(0,l.__)("Filter posts by taxonomy terms","pikari-gutenberg-query-filter"),attributes:{filterType:"taxonomy",label:(0,l.__)("Filter by","pikari-gutenberg-query-filter")},scope:["inserter","transform"],isActive:e=>"taxonomy"===e.filterType,icon:"category"},{name:"author",title:(0,l.__)("Author Filter","pikari-gutenberg-query-filter"),description:(0,l.__)("Filter posts by author","pikari-gutenberg-query-filter"),attributes:{filterType:"author",label:(0,l.__)("Author","pikari-gutenberg-query-filter")},scope:["inserter","transform"],isActive:e=>"author"===e.filterType,icon:"admin-users"}];(0,i.registerBlockType)(y.UU,{edit:function({attributes:e,setAttributes:r,context:t}){const{filterType:i,taxonomy:o,emptyLabel:y,label:g,showLabel:b,displayType:d,layoutDirection:h}=e,f=`query-filter-${Math.random().toString(36).substr(2,9)}`,_=(0,u.useSelect)(e=>"post-type"!==i?[]:(e("core").getPostTypes({per_page:100})||[]).filter(e=>e.viewable)||[],[i]),m=(0,u.useSelect)(e=>{if("taxonomy"!==i)return[];const t=(e("core").getTaxonomies({per_page:100})||[]).filter(e=>e.visibility.publicly_queryable);return t&&t.length>0&&!o&&r({taxonomy:t[0].slug,label:t[0].name}),t},[i,o,r]),x=(0,u.useSelect)(e=>"taxonomy"===i&&o&&e("core").getEntityRecords("taxonomy",o,{number:50})||[],[i,o]),k=(0,u.useSelect)(e=>"author"!==i?[]:e("core").getUsers({who:"authors",per_page:100})||[],[i]);let v=[];"post-type"===i&&t.query&&(v=(t.query.postType||"").split(",").map(e=>e.trim()),Array.isArray(t.query.multiple_posts)&&(v=v.concat(t.query.multiple_posts)));const q=v.map(e=>_.find(r=>r.slug===e)||{slug:e,name:e}),w=()=>{switch(i){case"post-type":return(0,l.__)("Content Type","pikari-gutenberg-query-filter");case"taxonomy":return o&&m.length>0&&m.find(e=>e.slug===o)?.name||(0,l.__)("Filter by","pikari-gutenberg-query-filter");case"author":return(0,l.__)("Author","pikari-gutenberg-query-filter");default:return(0,l.__)("Filter","pikari-gutenberg-query-filter")}},j=(0,a.useBlockProps)({className:n()("wp-block-pikari-gutenberg-query-filter",{"has-layout-horizontal":"horizontal"===h})});return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(a.InspectorControls,{children:(0,p.jsxs)(s.PanelBody,{title:(0,l.__)("Filter Settings","pikari-gutenberg-query-filter"),children:["taxonomy"===i&&(0,p.jsx)(s.SelectControl,{label:(0,l.__)("Taxonomy","pikari-gutenberg-query-filter"),value:o||"",options:[{label:(0,l.__)("Select a taxonomy","pikari-gutenberg-query-filter"),value:""},...m.map(e=>({label:e.name,value:e.slug}))],onChange:e=>r({taxonomy:e})}),(0,p.jsx)(s.SelectControl,{label:(0,l.__)("Display Type","pikari-gutenberg-query-filter"),value:d,options:[{label:(0,l.__)("Select (Dropdown)","pikari-gutenberg-query-filter"),value:"select"},{label:(0,l.__)("Radio (Single Choice)","pikari-gutenberg-query-filter"),value:"radio"},{label:(0,l.__)("Checkbox (Multiple Choice)","pikari-gutenberg-query-filter"),value:"checkbox"}],onChange:e=>r({displayType:e})}),("radio"===d||"checkbox"===d)&&(0,p.jsxs)(s.__experimentalToggleGroupControl,{label:(0,l.__)("Layout Direction","pikari-gutenberg-query-filter"),value:h,onChange:e=>r({layoutDirection:e}),isBlock:!0,__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,children:[(0,p.jsx)(s.__experimentalToggleGroupControlOption,{value:"vertical",label:(0,l.__)("Vertical","pikari-gutenberg-query-filter")}),(0,p.jsx)(s.__experimentalToggleGroupControlOption,{value:"horizontal",label:(0,l.__)("Horizontal","pikari-gutenberg-query-filter")})]}),(0,p.jsx)(s.TextControl,{label:(0,l.__)("Label","pikari-gutenberg-query-filter"),value:g,placeholder:w(),help:(0,l.__)("If empty then no label will be shown","pikari-gutenberg-query-filter"),onChange:e=>r({label:e})}),(0,p.jsx)(s.ToggleControl,{label:(0,l.__)("Show Label","pikari-gutenberg-query-filter"),checked:b,onChange:e=>r({showLabel:e})}),(0,p.jsx)(s.TextControl,{label:(0,l.__)("Empty Choice Label","pikari-gutenberg-query-filter"),value:y,placeholder:(0,l.__)("All","pikari-gutenberg-query-filter"),onChange:e=>r({emptyLabel:e})})]})}),(0,p.jsxs)("div",{...j,children:[(0,p.jsx)("label",{className:n()("wp-block-pikari-gutenberg-query-filter__label",{"screen-reader-text":!b}),htmlFor:f,children:g||w()}),"select"===d&&(0,p.jsxs)("select",{className:"wp-block-pikari-gutenberg-query-filter__select",id:f,disabled:!0,children:[(0,p.jsx)("option",{value:"",children:y||(0,l.__)("All","pikari-gutenberg-query-filter")}),(()=>{switch(i){case"post-type":return q.map(e=>(0,p.jsx)("option",{value:e.slug,children:e.name},e.slug));case"taxonomy":return x.map(e=>(0,p.jsx)("option",{value:e.slug,children:e.name},e.id));case"author":return k.map(e=>(0,p.jsx)("option",{value:e.id,children:e.name},e.id));default:return null}})()]}),"radio"===d&&(0,p.jsxs)("div",{className:n()("wp-block-pikari-gutenberg-query-filter__radio-group",{"has-layout-horizontal":"horizontal"===h}),children:[(0,p.jsx)(c,{type:"radio",disabled:!0,checked:!0,children:y||(0,l.__)("All","pikari-gutenberg-query-filter")}),"post-type"===i&&q.slice(0,3).map(e=>(0,p.jsx)(c,{type:"radio",disabled:!0,children:e.name},e.slug)),"taxonomy"===i&&x.slice(0,3).map(e=>(0,p.jsx)(c,{type:"radio",disabled:!0,children:e.name},e.id)),"author"===i&&k.slice(0,3).map(e=>(0,p.jsx)(c,{type:"radio",disabled:!0,children:e.name},e.id))]}),"checkbox"===d&&(0,p.jsxs)("div",{className:n()("wp-block-pikari-gutenberg-query-filter__checkbox-group",{"has-layout-horizontal":"horizontal"===h}),children:["post-type"===i&&q.slice(0,3).map(e=>(0,p.jsx)(c,{type:"checkbox",disabled:!0,children:e.name},e.slug)),"taxonomy"===i&&x.slice(0,3).map(e=>(0,p.jsx)(c,{type:"checkbox",disabled:!0,children:e.name},e.id)),"author"===i&&k.slice(0,3).map(e=>(0,p.jsx)(c,{type:"checkbox",disabled:!0,children:e.name},e.id))]})]})]})},variations:g})},942(e,r){var t;!function(){"use strict";var i={}.hasOwnProperty;function l(){for(var e="",r=0;r<arguments.length;r++){var t=arguments[r];t&&(e=o(e,a(t)))}return e}function a(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return l.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var r="";for(var t in e)i.call(e,t)&&e[t]&&(r=o(r,t));return r}function o(e,r){return r?e?e+" "+r:e+r:e}e.exports?(l.default=l,e.exports=l):void 0===(t=function(){return l}.apply(r,[]))||(e.exports=t)}()}},t={};function i(e){var l=t[e];if(void 0!==l)return l.exports;var a=t[e]={exports:{}};return r[e](a,a.exports,i),a.exports}i.m=r,e=[],i.O=(r,t,l,a)=>{if(!t){var o=1/0;for(p=0;p<e.length;p++){for(var[t,l,a]=e[p],n=!0,s=0;s<t.length;s++)(!1&a||o>=a)&&Object.keys(i.O).every(e=>i.O[e](t[s]))?t.splice(s--,1):(n=!1,a<o&&(o=a));if(n){e.splice(p--,1);var u=l();void 0!==u&&(r=u)}}return r}a=a||0;for(var p=e.length;p>0&&e[p-1][2]>a;p--)e[p]=e[p-1];e[p]=[t,l,a]},i.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return i.d(r,{a:r}),r},i.d=(e,r)=>{for(var t in r)i.o(r,t)&&!i.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},i.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),(()=>{var e={74:0,358:0};i.O.j=r=>0===e[r];var r=(r,t)=>{var l,a,[o,n,s]=t,u=0;if(o.some(r=>0!==e[r])){for(l in n)i.o(n,l)&&(i.m[l]=n[l]);if(s)var p=s(i)}for(r&&r(t);u<o.length;u++)a=o[u],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return i.O(p)},t=globalThis.webpackChunkpikari_query_filter=globalThis.webpackChunkpikari_query_filter||[];t.forEach(r.bind(null,0)),t.push=r.bind(null,t.push.bind(t))})();var l=i.O(void 0,[358],()=>i(609));l=i.O(l)})();